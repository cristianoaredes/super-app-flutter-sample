# Premium Bank - Flutter Super App (WIP)

<div align="center">

[![Flutter Version](https://img.shields.io/badge/Flutter-3.29.2-02569B?style=for-the-badge&logo=flutter&logoColor=white)](https://flutter.dev)
[![Dart Version](https://img.shields.io/badge/Dart-3.7.2-0175C2?style=for-the-badge&logo=dart&logoColor=white)](https://dart.dev)
[![Architecture](https://img.shields.io/badge/Architecture-Modular-brightgreen?style=for-the-badge)](https://github.com/cristianoaredes/super-app-flutter-sample)
[![State Management](https://img.shields.io/badge/State-BLoC/Cubit-blue?style=for-the-badge)](https://bloclibrary.dev)
[![Status](https://img.shields.io/badge/Status-WIP-yellow?style=for-the-badge)](https://github.com/cristianoaredes/super-app-flutter-sample)
[![MIT License](https://img.shields.io/badge/License-MIT-green.svg?style=for-the-badge)](https://choosealicense.com/licenses/mit/)

[English](README_en.md) | Portugu√™s

</div>

<p align="center">
  <img src="docs/screenshots/tela2.png" width="200" alt="Premium Bank App Screenshot"/>
</p>

> üè¶ Um super app banc√°rio modular constru√≠do com Flutter, implementando uma arquitetura escal√°vel e moderna para aplica√ß√µes financeiras.

## üåü Destaques

- üì± Interface moderna e intuitiva
- üîí Seguran√ßa e privacidade em primeiro lugar
- üöÄ Alta performance e otimiza√ß√£o
- ‚ôø Acessibilidade como prioridade
- üåê Suporte multi-idiomas (em breve)

Este projeto implementa uma arquitetura modular para Flutter usando o conceito de micro apps, focando na inicializa√ß√£o sob demanda, gerenciamento do ciclo de vida dos componentes e comunica√ß√£o entre m√≥dulos independentes.

## Principais Funcionalidades

- **Arquitetura Modular**: Uso de micro apps isolados e independentes
- **Inicializa√ß√£o Sob Demanda**: Carregamento de m√≥dulos apenas quando necess√°rio
- **Gerenciamento de Estado Robusto**: Implementa√ß√£o segura com BLoC/Cubit
- **Recupera√ß√£o de Falhas**: Detec√ß√£o e recupera√ß√£o autom√°tica de estados inv√°lidos
- **Middleware de Rotas Inteligente**: Gerenciamento de rotas com inicializa√ß√£o autom√°tica de m√≥dulos

## Principais Tecnologias

- **Flutter**: 3.29.2
- **Dart**: 3.7.2
- **Gerenciamento de Estado**: bloc 8.1.6 com flutter_bloc e hydrated_bloc 9.1.5
- **Inje√ß√£o de Depend√™ncia**: get_it 7.7.0
- **Navega√ß√£o**: go_router 12.1.3
- **C√≥digo Gerado**: freezed 2.5.8 e json_serializable 6.8.0
- **Armazenamento**: shared_preferences 2.2.3 e path_provider 2.1.4
- **Rede**: http 1.2.2 e dio 5.3.3

## Estrutura do Projeto

O projeto est√° organizado em tr√™s camadas principais:

1. **Super App**: Orquestra os micro apps e fornece funcionalidades compartilhadas
2. **Micro Apps**: Implementam funcionalidades espec√≠ficas de forma independente
3. **Core Packages**: Fornecem funcionalidades compartilhadas entre os micro apps

```
flutter_arqt/
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ core/                  # Pacotes core
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core_analytics/    # Servi√ßo de analytics
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core_interfaces/   # Interfaces compartilhadas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core_network/      # Servi√ßo de rede
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core_storage/      # Servi√ßo de armazenamento
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core_logging/      # Servi√ßo de logging
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core_feature_flags/ # Feature flags
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ core_communication/ # Comunica√ß√£o entre micro apps
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ micro_apps/            # Micro apps
‚îÇ       ‚îú‚îÄ‚îÄ account/           # Micro app de conta
‚îÇ       ‚îú‚îÄ‚îÄ auth/              # Micro app de autentica√ß√£o
‚îÇ       ‚îú‚îÄ‚îÄ cards/             # Micro app de cart√µes
‚îÇ       ‚îú‚îÄ‚îÄ dashboard/         # Micro app de dashboard
‚îÇ       ‚îú‚îÄ‚îÄ payments/          # Micro app de pagamentos
‚îÇ       ‚îú‚îÄ‚îÄ pix/               # Micro app de pix
‚îÇ       ‚îî‚îÄ‚îÄ splash/            # Micro app de splash screen
‚îÇ
‚îî‚îÄ‚îÄ super_app/                 # Aplica√ß√£o principal
    ‚îú‚îÄ‚îÄ lib/
    ‚îÇ   ‚îú‚îÄ‚îÄ core/              # Implementa√ß√µes core do super app
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ di/            # Inje√ß√£o de depend√™ncia
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router/        # Configura√ß√£o de rotas
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/      # Servi√ßos compartilhados
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme/         # Configura√ß√µes de tema
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ widgets/       # Widgets compartilhados
    ‚îÇ   ‚îî‚îÄ‚îÄ main.dart          # Ponto de entrada
    ‚îî‚îÄ‚îÄ test/                  # Testes
```

## Funcionalidades Implementadas

- **Autentica√ß√£o**: Login com email/senha e credenciais mockadas
- **Dashboard**: Exibi√ß√£o de resumo da conta e transa√ß√µes
- **Pagamentos**: Gerenciamento de pagamentos
- **Pix**: Transfer√™ncias Pix e gerenciamento de chaves
- **Cart√µes**: Gerenciamento de cart√µes
- **Conta**: Detalhes da conta e extrato

## Solu√ß√µes Arquiteturais

### Inicializa√ß√£o de Micro Apps Sob Demanda

Um dos destaques deste projeto √© o sistema de inicializa√ß√£o de micro apps sob demanda, implementado atrav√©s de um middleware de rotas. Este sistema:

1. Detecta automaticamente qual micro app √© necess√°rio para uma determinada rota
2. Verifica se o micro app j√° est√° inicializado e em um estado v√°lido
3. Inicializa o micro app se necess√°rio, ou reinicializa em caso de estado inv√°lido
4. Gerencia corretamente os recursos para evitar memory leaks

### Gerenciamento Robusto de Estado com BLoC/Cubit

Para resolver problemas comuns como "Cannot emit new states after calling close", implementamos um sistema robusto de gerenciamento de ciclo de vida para os Blocs e Cubits:

1. Verifica√ß√£o de estado dos Blocs/Cubits antes de us√°-los
2. Recria√ß√£o autom√°tica quando um Bloc/Cubit foi fechado
3. Tratamento adequado de exce√ß√µes durante o fechamento
4. Preven√ß√£o de memory leaks

### Diagrama da Arquitetura

```mermaid
graph TD
    SuperApp[Super App] --> |Inicializa| MicroApps[Micro Apps]
    SuperApp --> |Usa| Core[Core Packages]

    Router[GoRouter] --> Middleware[Route Middleware]
    Middleware --> |Inicializa| MicroApps

    MicroApps --> Auth[Auth]
    MicroApps --> Dashboard[Dashboard]
    MicroApps --> Account[Account]
    MicroApps --> Cards[Cards]
    MicroApps --> Payments[Payments]
    MicroApps --> Pix[Pix]
    MicroApps --> Splash[Splash]

    subgraph "Arquitetura de um Micro App"
        UI[Presentation Layer] --> |Usa| Bloc[BLoC/Cubit]
        Bloc --> |Usa| Domain[Domain Layer]
        Repositories[Repository Layer] --> |Implementa| Domain
        DataSources[Data Sources] --> |Alimenta| Repositories
    end

    Auth --> |Usa| Core
    Dashboard --> |Usa| Core
    Account --> |Usa| Core
    Cards --> |Usa| Core
    Payments --> |Usa| Core
    Pix --> |Usa| Core

    Core --> CoreInterfaces[Core Interfaces]
    Core --> CoreAnalytics[Core Analytics]
    Core --> CoreNetwork[Core Network]
    Core --> CoreStorage[Core Storage]
    Core --> CoreLogging[Core Logging]
```

## Inje√ß√£o de Depend√™ncias

A inje√ß√£o de depend√™ncias √© feita usando o pacote `get_it`. O Super App registra os servi√ßos core e os micro apps, que por sua vez registram suas pr√≥prias depend√™ncias internas.

O sistema de DI √© organizado da seguinte forma:
1. Registro de servi√ßos core (network, storage, analytics, etc.)
2. Registro de micro apps como singletons lazy
3. Cada micro app registra suas pr√≥prias depend√™ncias quando inicializado
4. Sistema de cleanup para liberar recursos quando um micro app √© descarregado

## Navega√ß√£o entre Micro Apps

A navega√ß√£o √© implementada usando o pacote `go_router`. Cada micro app define suas pr√≥prias rotas, e o Super App as orquestra atrav√©s do `AppRouter`.

Caracter√≠sticas principais:
1. Rotas aninhadas para micro apps
2. Middleware de inicializa√ß√£o autom√°tica
3. Sistema de recupera√ß√£o de falhas
4. Gerenciamento de estado da navega√ß√£o
5. Suporte a deep links
6. Transi√ß√µes personalizadas entre rotas

## Credenciais de Teste

Para testar a aplica√ß√£o, voc√™ pode usar:

- **Email**: `user@example.com`
- **Senha**: `password`

## Como Come√ßar

### Pr√©-requisitos

- Flutter 3.29.2
- Dart 3.7.2
- Java 17+ (para Android)
- Xcode 14+ (para iOS)
- Android Studio 2023.1+ ou VS Code com extens√µes Flutter/Dart

### Instala√ß√£o

1. Clone o reposit√≥rio:
   ```bash
   git clone https://github.com/cristianoaredes/super-app-flutter-sample.git
   cd super-app-flutter-sample
   ```

2. Instale as depend√™ncias:
   ```bash
   flutter pub get
   cd super_app
   flutter pub get
   ```

3. Execute o app:
   ```bash
   cd super_app
   flutter run
   ```

## Status do Projeto (WIP)

Este projeto est√° atualmente em desenvolvimento ativo (Work In Progress). Estamos continuamente implementando novas funcionalidades e melhorias.

## Melhorias Recentes

- **Atualiza√ß√£o para Flutter 3.29.2**: Atualiza√ß√£o do projeto para a √∫ltima vers√£o est√°vel do Flutter.
- **Atualiza√ß√£o de Depend√™ncias**: Atualiza√ß√£o de todas as depend√™ncias para as vers√µes mais recentes compat√≠veis.
- **Compatibilidade com Java 17+**: Configura√ß√£o do projeto para ser compat√≠vel com Java 17 e vers√µes superiores.
- **Corre√ß√£o do erro "Cannot emit new states after calling close"**: Implementa√ß√£o de um sistema robusto para gerenciar o ciclo de vida do Bloc/Cubit e prevenir emiss√£o de estados ap√≥s o fechamento.
- **Middleware de inicializa√ß√£o autom√°tica**: Cria√ß√£o de um middleware de rota que inicializa automaticamente os micro apps sob demanda.
- **Recupera√ß√£o de estados inv√°lidos**: Adi√ß√£o de mecanismos para detectar e recuperar de estados inv√°lidos de micro apps.
- **Renomeado para Premium Bank**: Mudan√ßa do nome do app para "Premium Bank" em todas as plataformas.
- **Adi√ß√£o de permiss√µes**: Adi√ß√£o de permiss√µes necess√°rias para c√¢mera, armazenamento, localiza√ß√£o e biometria.

## Pr√≥ximos Passos

- Adicionar testes unit√°rios e de widget
- Implementar CI/CD com GitHub Actions
- Adicionar autentica√ß√£o biom√©trica
- Implementar suporte a tema claro/escuro
- Melhorar a responsividade da interface
- Implementar integra√ß√£o com API real

## Screenshots

<table>
  <tr>
    <td align="center"><b>Login</b></td>
    <td align="center"><b>Dashboard</b></td>
    <td align="center"><b>Menu</b></td>
    <td align="center"><b>Lista de Cart√µes</b></td>
    <td align="center"><b>Detalhes do Cart√£o</b></td>
  </tr>
  <tr>
    <td><img src="docs/screenshots/tela1.png" width="150" alt="Tela de Login"/></td>
    <td><img src="docs/screenshots/tela2.png" width="150" alt="Tela de Dashboard"/></td>
    <td><img src="docs/screenshots/tela3.png" width="150" alt="Tela de Menu"/></td>
    <td><img src="docs/screenshots/tela4.png" width="150" alt="Lista de Cart√µes"/></td>
    <td><img src="docs/screenshots/tela4.1.png" width="150" alt="Detalhes do Cart√£o"/></td>
  </tr>
  <tr>
    <td align="center"><b>√Årea Pix</b></td>
    <td align="center"><b>Transfer√™ncia Pix</b></td>
    <td align="center"><b>Chaves Pix</b></td>
    <td align="center"><b>Pagamentos</b></td>
    <td align="center"><b>Novo Pagamento</b></td>
  </tr>
  <tr>
    <td><img src="docs/screenshots/tela5.png" width="150" alt="√Årea Pix"/></td>
    <td><img src="docs/screenshots/tela5.1.png" width="150" alt="Transfer√™ncia Pix"/></td>
    <td><img src="docs/screenshots/tela5.2.png" width="150" alt="Chaves Pix"/></td>
    <td><img src="docs/screenshots/tela6.png" width="150" alt="Tela de Pagamentos"/></td>
    <td><img src="docs/screenshots/tela6.1.png" width="150" alt="Novo Pagamento"/></td>
  </tr>
</table>

## üîç Palavras-chave
`flutter` `dart` `super-app` `fintech` `mobile-banking` `bloc-pattern` `clean-architecture` `modular-architecture` `dependency-injection` `micro-apps` `flutter-banking` `mobile-development` `flutter-example` `flutter-template` `banking-app` `flutter-architecture` `flutter-best-practices` `flutter-patterns` `flutter-clean-code` `flutter-modular`

## üìä M√©tricas do Projeto

[![GitHub stars](https://img.shields.io/github/stars/cristianoaredes/super-app-flutter-sample?style=social)](https://github.com/cristianoaredes/super-app-flutter-sample/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/cristianoaredes/super-app-flutter-sample?style=social)](https://github.com/cristianoaredes/super-app-flutter-sample/network/members)
[![GitHub issues](https://img.shields.io/github/issues/cristianoaredes/super-app-flutter-sample?style=social)](https://github.com/cristianoaredes/super-app-flutter-sample/issues)

## ü§ù Mantenedores

<table>
  <tr>
    <td align="center">
      <a href="https://github.com/cristianoaredes">
        <img src="https://avatars.githubusercontent.com/u/4899347?s=96&v=4" width="100px;" alt="Foto de Cristiano Aredes"/><br>
        <sub>
          <b>Cristiano Aredes</b>
        </sub>
      </a>
    </td>
  </tr>
</table>

## üì´ Contato

Para sugest√µes, d√∫vidas ou contribui√ß√µes:

- üìß Email: cristiano@aredes.me
- üíº LinkedIn: [Cristiano Aredes](https://www.linkedin.com/in/cristianoaredes/)

## ‚≠ê Mostre seu apoio

Se este projeto te ajudou de alguma forma, considere:

- ‚≠ê Dar uma estrela no GitHub
- üêõ Reportar bugs ou sugerir melhorias em [Issues](https://github.com/cristianoaredes/super-app-flutter-sample/issues)
- üîÄ Fazer um fork e contribuir com o projeto
- üì¢ Compartilhar com outros desenvolvedores

## üìù Cita√ß√£o

Se voc√™ usar este projeto como refer√™ncia em artigos ou estudos, por favor cite:

```bibtex
@software{premium_bank_flutter,
  author = {Cristiano Aredes},
  title = {Premium Bank - Flutter Super App},
  year = {2024},
  publisher = {GitHub},
  url = {https://github.com/cristianoaredes/super-app-flutter-sample}
}
```

---
<div align="center">
  Feito com ‚ù§Ô∏è por <a href="https://github.com/cristianoaredes">Cristiano Aredes</a>
</div>
